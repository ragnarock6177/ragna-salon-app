<!-- Backdrop for mobile -->
@if(isOpen) {
<div (click)="closeSidebar()" class="md:hidden fixed inset-0 bg-black/50 z-40 "></div>
}

<!-- Sidebar -->
<aside [ngClass]="{ 'translate-x-0': isOpen, '-translate-x-full md:translate-x-0': !isOpen }" class="fixed md:static inset-y-0 left-0 z-50 flex flex-col w-64 h-screen bg-white dark:bg-slate-950 border-r
        border-gray-200 dark:border-slate-800 transition-transform duration-300">
    <div class="flex items-center gap-2 px-5 py-4 border-b border-gray-200 dark:border-slate-800">
        <div class="h-9 w-9 rounded-xl bg-sky-500/10 flex items-center justify-center text-sky-600 dark:text-sky-400 text-lg 
            font-semibold tracking-tight">
            SP
        </div>
        <div class="flex flex-col">
            <span class="text-base font-semibold tracking-tight text-slate-900 dark:text-slate-50">SalonPanel</span>
            <span class="text-sm text-slate-600 dark:text-slate-400">Management</span>
        </div>
        <button (click)="closeSidebar()"
            class="md:hidden ml-auto p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-slate-800 text-slate-500">
            <i data-lucide="x" class="w-5 h-5"></i>
        </button>
    </div>

    <nav class="flex flex-col gap-1 px-3 py-4 text-sm overflow-auto">

        <!-- <div class="overflow-auto"> -->
        <!-- Dashboard -->
        <a routerLink="/dashboard" routerLinkActive="active" (click)="closeSidebar()" class="nav-btn flex items-center gap-3 rounded-lg px-3 py-2 
              text-slate-700 dark:text-slate-300
              hover:bg-gray-100 dark:hover:bg-slate-800
              hover:text-slate-900 dark:hover:text-slate-50
              border border-slate-200 dark:border-slate-700
              [&.active]:border-slate-300 dark:[&.active]:border-slate-600
              [&.active]:bg-gray-200 dark:[&.active]:bg-slate-900
              [&.active]:text-slate-900 dark:[&.active]:text-slate-50">
            <lucide-angular name="layout-dashboard" class="w-4 h-4 text-slate-500 dark:text-slate-400"></lucide-angular>
            <span>Dashboard</span>
        </a>

        <a routerLink="/city" routerLinkActive="active" (click)="closeSidebar()" class="nav-btn flex items-center gap-3 rounded-lg px-3 py-2 
              text-slate-700 dark:text-slate-300
              hover:bg-gray-100 dark:hover:bg-slate-800
              hover:text-slate-900 dark:hover:text-slate-50
              border border-slate-200 dark:border-slate-700
              [&.active]:border-slate-300 dark:[&.active]:border-slate-600
              [&.active]:bg-gray-200 dark:[&.active]:bg-slate-900
              [&.active]:text-slate-900 dark:[&.active]:text-slate-50">
            <lucide-angular name="building-2" class="w-4 h-4 text-slate-500 dark:text-slate-400"></lucide-angular>
            <span>City</span>
        </a>

        <!-- Users -->
        <a routerLink="/users" routerLinkActive="active" (click)="closeSidebar()" class="nav-btn flex items-center gap-3 rounded-lg px-3 py-2 
              text-slate-700 dark:text-slate-300
              hover:bg-gray-100 dark:hover:bg-slate-800
              hover:text-slate-900 dark:hover:text-slate-50
              border border-slate-200 dark:border-slate-700
              [&.active]:border-slate-300 dark:[&.active]:border-slate-600
              [&.active]:bg-gray-200 dark:[&.active]:bg-slate-900
              [&.active]:text-slate-900 dark:[&.active]:text-slate-50">
            <lucide-angular name="users" class="w-4 h-4 text-slate-500 dark:text-slate-400"></lucide-angular>
            <span>Users</span>
        </a>

        <a routerLink="/salons" routerLinkActive="active" (click)="closeSidebar()" class="nav-btn flex items-center gap-3 rounded-lg px-3 py-2 
              text-slate-700 dark:text-slate-300
              hover:bg-gray-100 dark:hover:bg-slate-800
              hover:text-slate-900 dark:hover:text-slate-50
              border border-slate-200 dark:border-slate-700
              [&.active]:border-slate-300 dark:[&.active]:border-slate-600
              [&.active]:bg-gray-200 dark:[&.active]:bg-slate-900
              [&.active]:text-slate-900 dark:[&.active]:text-slate-50">
            <lucide-angular name="store" class="w-4 h-4 text-slate-500 dark:text-slate-400"></lucide-angular>
            <span>Salons</span>
        </a>

        <!-- Coupons -->
        <a routerLink="/coupons" routerLinkActive="active" (click)="closeSidebar()" class="nav-btn flex items-center gap-3 rounded-lg px-3 py-2 
              text-slate-700 dark:text-slate-300
              hover:bg-gray-100 dark:hover:bg-slate-800
              hover:text-slate-900 dark:hover:text-slate-50
              border border-slate-200 dark:border-slate-700
              [&.active]:border-slate-300 dark:[&.active]:border-slate-600
              [&.active]:bg-gray-200 dark:[&.active]:bg-slate-900
              [&.active]:text-slate-900 dark:[&.active]:text-slate-50">
            <lucide-angular name="ticket" class="w-4 h-4 text-slate-500 dark:text-slate-400"></lucide-angular>
            <span>Coupons</span>
        </a>

        <!-- Memberships -->
        <a routerLink="/memberships" routerLinkActive="active" (click)="closeSidebar()" class="nav-btn flex items-center gap-3 rounded-lg px-3 py-2 
              text-slate-700 dark:text-slate-300
              hover:bg-gray-100 dark:hover:bg-slate-800
              hover:text-slate-900 dark:hover:text-slate-50
              border border-slate-200 dark:border-slate-700
              [&.active]:border-slate-300 dark:[&.active]:border-slate-600
              [&.active]:bg-gray-200 dark:[&.active]:bg-slate-900
              [&.active]:text-slate-900 dark:[&.active]:text-slate-50">
            <lucide-angular name="crown" class="w-4 h-4 text-slate-500 dark:text-slate-400"></lucide-angular>
            <span>Memberships</span>
        </a>
        <!-- </div> -->

        <!-- Settings Section -->
        <!-- <div class="mt-4 pt-4 border-t border-gray-200 dark:border-slate-800">
            <p class="px-3 text-xs font-medium uppercase tracking-wide 
              text-slate-500 dark:text-slate-400">
                Settings
            </p>

            <a routerLink="/settings" routerLinkActive="active" (click)="closeSidebar()" class="mt-2 flex items-center gap-3 rounded-lg px-3 py-2
                  text-slate-700 dark:text-slate-300
                  hover:bg-gray-100 dark:hover:bg-slate-800
                  hover:text-slate-900 dark:hover:text-slate-50
                  border border-transparent
                  border border-transparent
                  [&.active]:border-slate-200 dark:[&.active]:border-slate-800
                  [&.active]:bg-gray-200 dark:[&.active]:bg-slate-900
                  [&.active]:text-slate-900 dark:[&.active]:text-slate-50">
                <lucide-angular name="settings" class="w-4 h-4 text-slate-500 dark:text-slate-400"></lucide-angular>
                <span>Configuration</span>
            </a>
        </div> -->

    </nav>


    <!-- Spacer to push bottom section to end -->
    <div class="flex-1"></div>

    <div
        class="border-t border-gray-200 dark:border-slate-800 px-4 py-3 flex items-center justify-between gap-3 text-sm">
        <div class="flex items-center gap-3">
            <div
                class="h-8 w-8 rounded-full bg-gray-200 dark:bg-slate-800 flex items-center justify-center text-xs font-semibold tracking-tight text-slate-700 dark:text-slate-300">
                {{ currentUser()?.name?.slice(0, 2)?.toUpperCase() || 'AD' }}
            </div>
            <div class="flex flex-col">
                <span class="text-slate-900 dark:text-slate-100 text-sm font-medium">{{ currentUser()?.name || 'Admin'
                    }}</span>
                <span class="text-xs text-slate-500 dark:text-slate-400">{{ currentUser()?.email || 'Salon Owner'
                    }}</span>
            </div>
        </div>
        <button [matMenuTriggerFor]="userMenu"
            class="p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-slate-800 text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100">
            <lucide-angular name="ellipsis-vertical" class="w-4 h-4"></lucide-angular>
        </button>
        <mat-menu #userMenu="matMenu">
            <button mat-menu-item (click)="logout()">
                <lucide-angular name="log-out" class="w-4 h-4 mr-2"></lucide-angular>
                <span>Logout</span>
            </button>
        </mat-menu>
    </div>
</aside>